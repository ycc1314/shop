(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-balance-add_bankcard"],{1241:function(e,t,i){"use strict";var a=i("3e66"),n=i.n(a);n.a},"156c":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"content-top"},[i("v-uni-view",{staticClass:"cell-group"},[i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("银行卡号")])],1),i("v-uni-view",{staticClass:"cell-item-bd"},[i("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"number",focus:"",placeholder:"请输入银行卡号"},on:{blur:function(t){t=e.$handleEvent(t),e.checkCard()}},model:{value:e.cardNumber,callback:function(t){e.cardNumber=t},expression:"cardNumber"}})],1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("持卡人")])],1),i("v-uni-view",{staticClass:"cell-item-bd"},[i("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",placeholder:"请输入持卡人姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("银行名称")])],1),i("v-uni-view",{staticClass:"cell-item-bd"},[i("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",disabled:!0},model:{value:e.bankName,callback:function(t){e.bankName=t},expression:"bankName"}})],1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("银行卡类型")])],1),i("v-uni-view",{staticClass:"cell-item-bd"},[i("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",disabled:!0},model:{value:e.cardTypeName,callback:function(t){e.cardTypeName=t},expression:"cardTypeName"}})],1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("开户行名")])],1),i("v-uni-view",{staticClass:"cell-item-bd"},[i("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",placeholder:"请输入开户银行名"},model:{value:e.accountBank,callback:function(t){e.accountBank=t},expression:"accountBank"}})],1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("开户行地址")])],1),i("v-uni-view",{staticClass:"cell-item-bd"},[i("v-uni-input",{attrs:{value:e.pickerValue},on:{focus:function(t){t=e.$handleEvent(t),e.showThreePicker(t)}}}),i("area-picker",{ref:"areaPicker",attrs:{areaId:e.areaId,defaultIndex:e.defaultIndex},on:{onConfirm:function(t){t=e.$handleEvent(t),e.onConfirm(t)}}})],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-image",{staticClass:"cell-ft-next icon",attrs:{src:"../../../static/image/ic-pull-down.png"},on:{click:function(t){t=e.$handleEvent(t),e.showThreePicker(t)}}})],1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[e._v("设为默认")])],1),i("v-uni-view",{on:{click:function(t){t=e.$handleEvent(t),e.defaultChange(t)}}},[i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"1",checked:e.checked,color:"#333"}})],1)],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"button-bottom"},[i("v-uni-button",{staticClass:"btn btn-square btn-b",attrs:{"hover-class":"btn-hover2",disabled:e.submitStatus,loading:e.submitStatus},on:{click:function(t){t=e.$handleEvent(t),e.addCard(t)}}},[e._v("保存")])],1)],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},"15ca":function(e,t,i){"use strict";i.r(t);var a=i("77a0"),n=i.n(a);for(var c in a)"default"!==c&&function(e){i.d(t,e,function(){return a[e]})}(c);t["default"]=n.a},"169b":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".user-head[data-v-0f4435b1]{height:%?100?%}.user-head-img[data-v-0f4435b1]{height:%?90?%;width:%?90?%;border-radius:50%}.cell-hd-title[data-v-0f4435b1]{color:#333}.cell-item-bd[data-v-0f4435b1]{color:#666;font-size:%?26?%}.button-bottom .btn[data-v-0f4435b1]{width:50%}\n",""])},"358f":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("c5f6");var a={name:"area-picker",props:{areaId:{type:Number,required:!0},defaultIndex:{type:Array,required:!0,validator:function(e){return e.length>0&&e.length<=3}}},data:function(){return{pickerIndex:[0,0,0],pickerShow:!1,region:["河南省","郑州市","中原区"],provinceKey:-1,cityKey:-1,areaKey:-1,selectedData:[],pickerList:this.$db.get("areaList"),province:this.$db.get("areaList")}},created:function(){this.init()},watch:{mode:function(){this.pickerIndex=this.defaultIndex}},methods:{init:function(){this.province=this.$db.get("areaList"),this.getFullPath(this.areaId,this.province),this.pickerIndex=[this.provinceKey,this.cityKey,this.areaKey]},getFullPath:function(e,t){for(var i=0;i<t.length;i++)if(e==t[i].value){if(!t[i].children)return this.areaKey=i,!0;if(t[i].hasOwnProperty("children"))return t[i].children[0]&&!t[i].children[0].children?(this.cityKey=i,!0):(this.provinceKey=i,!0)}else if(t[i].hasOwnProperty("children")&&(void 0!==t[i].children[0]&&(t[i].children[0].hasOwnProperty("children")?this.provinceKey=i:this.cityKey=i),"undefined"!=typeof t[i].children)){var a=this.getFullPath(e,t[i].children);if(a)return!0}},pickerViewChangeThree:function(e){var t=e.detail.value;this.pickerList[t[0]].children.length-1<t[1]&&(t[1]=this.pickerList[t[0]].children.length-1),this.pickerList[t[0]].children[t[1]].children.length-1<t[2]&&(t[2]=this.pickerList[t[0]].children[t[1]].children.length-1),this.pickerIndex=t},showPicker:function(){uni.hideKeyboard(),this.init(),this.pickerShow=!0},confirm:function(){this.pickerShow=!1,this.selectedData=[{id:this.province[this.pickerIndex[0]].value,name:this.province[this.pickerIndex[0]].label},{id:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].value,name:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].label},{id:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].children[this.pickerIndex[2]].value,name:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].children[this.pickerIndex[2]].label}],this.$emit("onConfirm",this.selectedData)},closePicker:function(){this.pickerShow=!1}}};t.default=a},"3e66":function(e,t,i){var a=i("a907");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("32c7393e",a,!0,{sourceMap:!1,shadowMode:!1})},"433d":function(e,t,i){"use strict";var a=i("90e8"),n=i.n(a);n.a},"5f42":function(e,t,i){"use strict";i.r(t);var a=i("156c"),n=i("15ca");for(var c in n)"default"!==c&&function(e){i.d(t,e,function(){return n[e]})}(c);i("433d");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"0f4435b1",null);t["default"]=r.exports},6130:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.pickerShow,expression:"pickerShow"}],staticClass:"picker-mask",attrs:{catchtouchmove:"true"},on:{click:function(t){t=e.$handleEvent(t),e.closePicker(t)}}}),i("v-uni-view",{staticClass:"picker-content",class:{pickerShow:e.pickerShow}},[i("v-uni-view",{staticClass:"picker-button"},[i("v-uni-text",{on:{click:function(t){t=e.$handleEvent(t),e.closePicker(t)}}},[e._v("取消")]),i("v-uni-text",{on:{click:function(t){t=e.$handleEvent(t),e.confirm(t)}}},[e._v("确定")])],1),i("v-uni-picker-view",{staticClass:"picker-view",attrs:{"indicator-class":"picker-view-selected-three",value:e.pickerIndex},on:{change:function(t){t=e.$handleEvent(t),e.pickerViewChangeThree(t)}}},[i("v-uni-picker-view-column",e._l(e.pickerList,function(t,a){return i("v-uni-view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}),1),i("v-uni-picker-view-column",e._l(e.pickerList[e.pickerIndex[0]].children,function(t,a){return i("v-uni-view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}),1),i("v-uni-picker-view-column",e._l(e.pickerList[e.pickerIndex[0]].children[e.pickerIndex[1]].children,function(t,a){return i("v-uni-view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}),1)],1)],1)],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},"77a0":function(e,t,i){"use strict";var a=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("7f7f");var n=a(i("c688")),c={components:{areaPicker:n.default},data:function(){return{bankName:"",cardType:1,cardTypeName:"",bankCode:"",accountBank:"",cardNumber:"",name:"",mobile:"",region:["北京市","北京市","东城区"],areaId:110101,address:"",is_def:2,checked:!1,pickerValue:"",defaultIndex:[0,0,0],submitStatus:!1}},computed:{},methods:{showThreePicker:function(){this.$refs.areaPicker.showPicker()},onConfirm:function(e){var t=this,i=e[0].name,a=e[1].name,n=e[2].name;this.pickerValue=e[0].name+" "+e[1].name+" "+e[2].name;var c={province_name:i,city_name:a,county_name:n};this.$api.getAreaId(c,function(e){e.status?t.areaId=e.data:uni.showModal({title:"提示",content:"地区选择出现问题，请重新选择地区",showCancel:!1})})},defaultChange:function(){this.checked=!this.checked,this.is_def=1===this.is_def?2:1},saveShip:function(){var e=this;if(this.id&&0!=this.id){var t={id:this.id,name:this.name,address:this.address,mobile:this.mobile,is_def:this.is_def};t["area_id"]=this.areaId,this.$api.editShip(t,function(t){t.status?e.$common.successToShow("编辑成功",function(){uni.navigateBack({delta:1})}):e.$common.errorToShow(t.msg)})}else{var i={area_id:this.areaId,name:this.name,address:this.address,mobile:this.mobile,is_def:this.is_def};this.$api.saveUserShip(i,function(t){t.status?e.$common.successToShow("添加成功",function(){uni.navigateBack({delta:1})}):e.$common.errorToShow(t.msg)})}},checkCard:function(){var e=this;if(this.cardNumber){var t={card_code:this.cardNumber};this.$api.getBankCardOrganization(t,function(t){if(t.status){var i=t.data;e.bankName=i.name,e.cardType=i.type,e.bankCode=i.bank_code,e.cardTypeName=i.type_name}else e.$common.errorToShow(t.msg,function(){e.bankCode=e.bankName=e.cardType=e.cardTypeName=""})})}else this.bankCode=this.bankName=this.cardType=this.cardTypeName=""},addCard:function(){var e=this;if(this.cardNumber)if(this.bankName&&this.cardType&&this.bankCode)if(/^[\u4E00-\u9FA5]{2,4}$/.test(this.name))if(this.areaId)if(this.accountBank){this.submitStatus=!0;var t={bankName:this.bankName,areaId:this.areaId,accountBank:this.accountBank,accountName:this.name,bankCode:this.bankCode,cardNumber:this.cardNumber,cardType:this.cardType,isDefault:this.is_def};this.$api.addBankCard(t,function(t){t.status?e.$common.successToShow(t.msg,function(t){e.submitStatus=!1,uni.navigateBack({delta:1})}):(e.$common.errorToShow(t.msg),e.submitStatus=!1)})}else this.$common.errorToShow("请输入开户银行信息");else this.$common.errorToShow("请选择开户行所在地区");else this.$common.errorToShow("请输入正确的持卡人名称");else this.$common.errorToShow("请输入正确的银行卡号");else this.$common.errorToShow("请输入银行卡号")}},onLoad:function(e){e.ship_id?(this.id=e.ship_id,this.getShipInfo()):this.pickerValue=this.region[0]+" "+this.region[1]+" "+this.region[2]},onBackPress:function(){if(this.$refs.areaPicker.pickerShow)return this.$refs.areaPicker.closePicker(),!0}};t.default=c},"90e8":function(e,t,i){var a=i("169b");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("21a4ceac",a,!0,{sourceMap:!1,shadowMode:!1})},9239:function(e,t,i){"use strict";i.r(t);var a=i("358f"),n=i.n(a);for(var c in a)"default"!==c&&function(e){i.d(t,e,function(){return a[e]})}(c);t["default"]=n.a},a907:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".picker-mask[data-v-08921cc8]{position:fixed;top:0;right:0;left:0;bottom:0;z-index:50;width:100%;height:100%;background-color:rgba(0,0,0,.3)}.picker-content[data-v-08921cc8]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:fixed;bottom:0;left:0;z-index:100;width:100%;height:%?600?%;background-color:#fff;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);-webkit-transition:all .2s ease;-o-transition:all .2s ease;transition:all .2s ease}.pickerShow[data-v-08921cc8]{-webkit-transform:translateY(0)!important;-ms-transform:translateY(0)!important;transform:translateY(0)!important}.picker-content .picker-button[data-v-08921cc8]{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:%?80?%;line-height:%?80?%}.picker-button uni-text[data-v-08921cc8]{width:%?180?%;font-size:%?28?%;font-weight:500;display:block;text-align:center;overflow:hidden}.picker-button uni-text[data-v-08921cc8]:first-child{color:#a1a1a1;float:left}.picker-button uni-text[data-v-08921cc8]:last-child{color:#ff7159;float:right}.picker-content .picker-view[data-v-08921cc8]{width:100%;height:%?500?%}.picker-content .picker-view-selected-one[data-v-08921cc8],.picker-content .picker-view-selected-three[data-v-08921cc8],.picker-content .picker-view-selected-two[data-v-08921cc8]{height:%?68?%;line-height:%?68?%;border-top:#1aad19 %?1?% solid;border-bottom:#1aad19 %?1?% solid}.picker-content .picker-view-selected-one[data-v-08921cc8]{position:relative;left:25%;width:50%}.picker-content .picker-view-selected-two[data-v-08921cc8]{position:relative;left:15%;width:70%}.picker-content .picker-view-selected-three[data-v-08921cc8]{position:relative;left:5%;width:90%}.picker-view .picker-item[data-v-08921cc8]{width:100%;height:34px;line-height:34px;font-size:15px;font-weight:600;display:block;text-align:center}",""])},c688:function(e,t,i){"use strict";i.r(t);var a=i("6130"),n=i("9239");for(var c in n)"default"!==c&&function(e){i.d(t,e,function(){return n[e]})}(c);i("1241");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"08921cc8",null);t["default"]=r.exports}}]);